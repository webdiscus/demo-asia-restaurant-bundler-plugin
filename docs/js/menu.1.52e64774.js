(()=>{"use strict";const e=(e,t,n)=>{const o=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting)for(let e=0;e<n.length;e+=1)document.querySelector(n[0]).style.opacity="1",document.querySelector(n[1]).style.opacity="0",document.querySelector(n[2]).style.opacity="0"}))}),{threshold:t});document.querySelectorAll(e).forEach((e=>o.observe(e)))},t=(e,t,n,o,r)=>{const s=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&document.querySelectorAll(n).forEach((e=>{e.classList.replace(o,r)}))}))}),{threshold:t});document.querySelectorAll(e).forEach((e=>s.observe(e)))},n={intervals:new Set,makeInterval(...e){const t=setInterval(...e);return this.intervals.add(t),t},makeTimeout(...e){const t=setTimeout(...e);return this.intervals.add(t),t},clear(e){return this.intervals.delete(e),clearInterval(e)},clearAll(){this.intervals.clear()}};window.addEventListener("DOMContentLoaded",(()=>{(()=>{const e=document.querySelectorAll(".left-content a"),t=document.querySelector(".content");for(let n=0;n<e.length;n+=1)e[n].id===t.classList[1]&&e[n].classList.replace("nav-inactive","nav-active")})();const o=Array.from(document.querySelectorAll(".menuPics"));n.makeTimeout((()=>{o[1].style.display="block"}),1e4),n.makeInterval((()=>(e=>{const t=Array.from(document.querySelectorAll(".menuPics")),o=[];n.intervals.forEach((e=>{[...n.intervals].indexOf(e)>=2&&n.intervals.delete(e)})),t.forEach((e=>{e.classList.contains("slide-active")&&(o.splice(0,o.length),o.push(e))}));const r=document.getElementById(o[0].id);let s,l;const c=()=>{s.style.zIndex="10",s.style.display="block",l.style.zIndex="9",l.style.display="block"};Number(o[0].id)<t.length-1?(s=document.getElementById((Number(o[0].id)+1).toString()),Number(s.id)<t.length-1?l=document.getElementById(Number(s.id)+1):Number(s.id)>=t.length-1&&(l=document.getElementById("0")),s.classList.add("slide-active"),n.makeTimeout(c,5e3)):Number(o[0].id)>=t.length-1&&(s=document.getElementById("0"),Number(s.id)<t.length-1?(l=document.getElementById(Number(s.id)+1),l.style.zIndex="9"):Number(s.id)>=t.length-1&&(l=document.getElementById("0"),l.style.zIndex="9"),s.classList.add("slide-active"),n.makeTimeout(c,5e3)),n.makeTimeout((()=>{r.classList.remove("slide-active")}),5e3);for(let e=0;e<t.length;e+=1)if(t[e]!==s&&t[e]!==l){const o=()=>{t[e].style.zIndex="8",t[e].style.display="none"};n.makeTimeout(o,5e3)}})()),1e4),e(".breakfast",.01,[".bg-bf",".bg-lch",".bg-dnr"]),e(".breakfast-menu",.01,[".bg-bf",".bg-lch",".bg-dnr"]),e(".lunch",.5,[".bg-lch",".bg-bf",".bg-dnr"]),e(".lunch-menu",.5,[".bg-lch",".bg-bf",".bg-dnr"]),e(".dinner",.5,[".bg-dnr",".bg-bf",".bg-lch"]),e(".dnr-container",.3,[".bg-dnr",".bg-bf",".bg-lch"]),["#header-breakfast",".special-dish"].forEach((e=>{t(e,.3,e,"hidden","show")})),[".quote-text",".breakfast-menu.normal .food-container.first",".breakfast-menu.normal .food-container.second",".breakfast-menu.offset .food-img.first",".breakfast-menu.offset .food-img.second",".dnr-desc-left"].forEach((e=>{t(e,.3,e,"fadeFromLeft","fadeToRight")})),[".quote p:nth-of-type(1)",".breakfast-menu.normal .food-img.first",".breakfast-menu.normal .food-img.second",".breakfast-menu.offset .food-container.first",".breakfast-menu.offset .food-container.second",".dnr-desc-right .dnr-desc",".rgt-dnr-2"].forEach((e=>{t(e,.3,e,"fadeFromRight","fadeToLeft")})),[".lch-food-img",".lft-dnr",".rgt-dnr-1"].forEach((e=>{t(e,.3,e,"up","down")})),[".lunch .food-container",".dnr-desc-btm .dnr-desc",".btm-dnr"].forEach((e=>{t(e,.1,e,"fadeOut","fadeIn")}))})),window.onscroll=()=>{const e=document.querySelector(".sticky-navbar");document.body.scrollTop>25||document.documentElement.scrollTop>25?e.style.top="0":e.style.top="-180px"},document.body.addEventListener("click",(e=>{const t=document.querySelector(".sidebar.menu");(e.target.matches(".sidebar.symbol")||e.target.matches(".menu-icon")||e.target.matches(".menu-text"))&&(t.style.transform="translate3d(0, 0, 0)"),e.target.matches(".closeBtn")&&(t.style.transform="translate3d(-450px, 0, 0)")}));const o=document.querySelector("#pre-loader");window.onload=()=>{o.style.display="none"}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUJBQWlCLFNBQVVrQyxJQUNyQyxNQUFNQyxFQUFpQm5FLFNBQVNDLGNBQWMsa0JBRTFDaUUsRUFBRTVELE9BQU84RCxRQUFRLG9CQUFzQkYsRUFBRTVELE9BQU84RCxRQUFRLGVBQWlCRixFQUFFNUQsT0FBTzhELFFBQVEsaUJBQ2hGRCxFRCtNUGpFLE1BQU1tRSxVQUFZLHdCQzdNckJILEVBQUU1RCxPQUFPOEQsUUFBUSxlQUNORCxFRCtNUmpFLE1BQU1tRSxVQUFZLDRCQzlNekIsSUFHSixNQUFNQyxFQUFVdEUsU0FBU0MsY0FBYyxlQUN2QzhCLE9BQU93QyxPQUFTLEtBQ1pELEVBQVFwRSxNQUFNcUMsUUFBVSxNQUFNLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZXN0YXVyYW50LXBhZ2UtdjIvLi9zcmMvc2NyaXB0cy90ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly9yZXN0YXVyYW50LXBhZ2UtdjIvLi9zcmMvc2NyaXB0cy9tZW51LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuY29uc3QgY3JlYXRlUGFnZSA9IChodG1sKSA9PiBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChodG1sKTtcblxuLyogU2xpZGVzaG93ICovXG5cbmNvbnN0IGNhcm91c2VsU3RhcnQgPSAodGFyZ2V0KSA9PiB7XG4gICAgY29uc3QgZG90cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kb3QnKTtcbiAgICBjb25zdCBzbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGUnKTtcbiAgICBkb3RzLmZvckVhY2goKGRvdCkgPT4gZG90LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcbiAgICBzbGlkZXMuZm9yRWFjaCgoc2xpZGUpID0+IHsgc2xpZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiIH0pO1xuICAgIHNsaWRlc1t0YXJnZXQgLSAxXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBkb3RzW3RhcmdldCAtIDFdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xufVxuXG5jb25zdCBjYXJvdXNlbEF1dG9SdW4gPSAoKSA9PiB7XG4gICAgY29uc3QgZG90cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kb3QnKTtcbiAgICBjb25zdCBzbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGUnKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChzbGlkZXNbaV0uc3R5bGUuZGlzcGxheSA9PT0gXCJibG9ja1wiICYmIChzbGlkZXNbaSArIDFdKSkge1xuICAgICAgICAgICAgc2xpZGVzW2ldLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGRvdHNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICBzbGlkZXNbaSArIDFdLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICBkb3RzW2kgKyAxXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2UgaWYgKGkgPT09IHNsaWRlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBzbGlkZXNbaV0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgZG90c1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGNhcm91c2VsU3RhcnQoMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuY29uc3QgbW92ZVNsaWRlID0gKGluZGV4KSA9PiB7XG4gICAgY29uc3QgZG90cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kb3QnKTtcbiAgICBjb25zdCBzbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGUnKTtcbiAgICBpZiAoaW5kZXggPT09IDEpIHtcblxuICAgICAgICBjYXJvdXNlbEF1dG9SdW4oKTtcbiAgICB9IGVsc2UgaWYgKGluZGV4ID09PSAtMSkge1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpZiAoc2xpZGVzW2ldLnN0eWxlLmRpc3BsYXkgPT09IFwiYmxvY2tcIiAmJiAoc2xpZGVzW2kgLSAxXSkpIHtcblxuICAgICAgICAgICAgICAgIHNsaWRlc1tpXS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgZG90c1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBzbGlkZXNbaSAtIDFdLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgZG90c1tpIC0gMV0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2xpZGVzW2ldLnN0eWxlLmRpc3BsYXkgPT09IFwiYmxvY2tcIiAmJiBpID09PSAwKSB7LyogaWYgb25seSBpID09PSAwIGlzIHRoZSBjb25kaXRpb24sIHRoZSBsb29wIGJyZWFrcyByaWdodGF3YXkgYXQgdGhlIHN0YXJ0IC0gcmVzdWx0aW5nIGluIGR1cGxpY2F0ZSBvciBwcm9ibGVtYXRpYyBmbG93ICovXG5cbiAgICAgICAgICAgICAgICBzbGlkZXNbMF0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIGRvdHNbMF0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgY2Fyb3VzZWxTdGFydChzbGlkZXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgZG90TW92ZSA9ICh0YXJnZXQpID0+IHtcbiAgICBjb25zdCBkb3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRvdCcpO1xuICAgIGRvdHMuZm9yRWFjaCgoZG90KSA9PiBkb3QuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKSk7XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgY29uc3QgaW5kZXggPSBBcnJheS5mcm9tKGRvdHMpLmZpbmRJbmRleCgoYSkgPT4gYS5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpICsgMTtcbiAgICBjYXJvdXNlbFN0YXJ0KGluZGV4KTtcbn1cblxuLyogU2VjdGlvbiBzdHlsZSBkaXZpZGVyICovXG5cbmNvbnN0IGludGVyc2VjdGlvbk9ic2VydmUgPSAoZ3JvdXBDbGFzcywgdEhvbGQsIGN1ckF0dCwgaW50ZXJBdHQpID0+IHtcbiAgICBjb25zdCBvYnNlcnZlck9wdGlvbnMgPSB7XG4gICAgICAgIHJvb3Q6IG51bGwsIC8qIFNlbGVjdCB0aGUgYXJlYSB0aGF0IHRoZSBvYnNlcnZlciBpcyBhcHBsaWVkIHRvLCBudWxsID0gZGVmYXVsdCB0byBicm93c2VyIHZpZXdwb3J0ICovXG4gICAgICAgIHJvb3RNYXJnaW46ICcwcHgnLCAvKiBNYXJnaW4gYXJvdW5kIHRoZSByb290ICovXG4gICAgICAgIHRocmVzaG9sZDogdEhvbGQgLyogRXhjdXRlIGNhbGxiYWNrIGF0IDUwJSBvZiB0YXJnZXQgdmlzaWJpbGl0eS4gSWYgeW91IHdhbnQgdGhlIGNhbGxiYWNrIHRvIHJ1biBldmVyeSB0aW1lIHZpc2liaWxpdHkgcGFzc2VzIGFub3RoZXIgMjUlLCB5b3Ugd291bGQgc3BlY2lmeSB0aGUgYXJyYXkgWzAsIDAuMjUsIDAuNSwgMC43NSwgMV0gLSBNYXliZSBnb29kIGZvciBkeW5hbWljIGNvbG9yIGNoYW5naW5nIG9mIGJhY2tncm91bmQgKi9cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvYnNlcnZlckNhbGxiYWNrKGVudHJpZXMsIG9ic2VydmVyKSB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHsvKiBNYW55IG9wdGlvbnMuIEUuZy4gZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPiBwcmV2UmF0aW8gbWVhbnMgdGhhdCBmb3IgZWFjaCBzZWN0aW9uIG9mIGVudHJpZXMsIHdlIGxvb2sgdG8gc2VlIGlmIHRoZSByYXRpbyBpcyBnb2luZyB1cCAocHJldlJhdGlvID0gZW50cnkuaW50ZXJzZWN0aW9uUmF0aW87IG1lYW5pbmcgZ3JhZHVhbGx5IGNoZWNraW5nIHRoZSBwb3NpdGlvbiAtIHNjcm9sbCB1cCBvciBzY3JvbGwgZG93bikgKi9cbiAgICAgICAgICAgICAgICBBcnJheS5mcm9tKGVudHJ5LnRhcmdldC5jaGlsZHJlbikuZm9yRWFjaCgoY2hpbGQpID0+IGNoaWxkLmNsYXNzTGlzdC5yZXBsYWNlKGN1ckF0dCwgaW50ZXJBdHQpKVxuICAgICAgICAgICAgICAgIC8qIGZhZGUgaW4gZWxlbXMgdGhhdCBhcmUgaW4gdmlldyAqL1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEFycmF5LmZyb20oZW50cnkudGFyZ2V0LmNoaWxkcmVuKS5mb3JFYWNoKChjaGlsZCkgPT4gY2hpbGQuY2xhc3NMaXN0LnJlcGxhY2UoaW50ZXJBdHQsIGN1ckF0dCkpXG4gICAgICAgICAgICAgICAgLyogZmFkZSBvdXQgZWxlbXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHZpZXcgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKG9ic2VydmVyQ2FsbGJhY2ssIG9ic2VydmVyT3B0aW9ucyk7XG4gICAgY29uc3QgdGFyZ2V0R3JvdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGdyb3VwQ2xhc3MpO1xuICAgIHRhcmdldEdyb3VwLmZvckVhY2godGFyZ2V0ID0+IG9ic2VydmVyLm9ic2VydmUodGFyZ2V0KSk7XG59XG5cbmNvbnN0IGJhY2tncm91bmRDaGFuZ2VyID0gKGdyb3VwQ2xhc3MsIHRob2xkLCB0YXJnZXRFbCkgPT4ge1xuICAgIGNvbnN0IGNhbGxiYWNrID0gKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICAvKiBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGVudHJ5LnRhcmdldC5kYXRhc2V0LmNvbG9yOyAqL1xuICAgICAgICAgICAgICAgIC8qIHRhcmdldEVsLnN0eWxlLmJhY2tncm91bmQgPSB0YXJnZXRDc3M7XG4gICAgICAgICAgICAgICAgdGFyZ2V0RWwuc3R5bGUuYmFja2dyb3VuZFJlcGVhdCA9IFwibm8tcmVwZWF0XCI7XG4gICAgICAgICAgICAgICAgdGFyZ2V0RWwuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBcImNvdmVyXCI7ICovXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRFbC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldEVsWzBdKS5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0RWxbMV0pLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRFbFsyXSkuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihjYWxsYmFjaywgeyB0aHJlc2hvbGQ6IHRob2xkIH0pO1xuICAgIGNvbnN0IHRhcmdldEdyb3VwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChncm91cENsYXNzKTtcbiAgICB0YXJnZXRHcm91cC5mb3JFYWNoKHRhcmdldCA9PiBvYnNlcnZlci5vYnNlcnZlKHRhcmdldCkpXG59XG5cbmNvbnN0IHVuaXZlcnNhbE9ic2VydmVyID0gKGdyb3VwQ2xhc3MsIHRob2xkLCB0YXJnZXRFbENsYXNzLCBjdXJyQXR0LCBuZXdBdHQpID0+IHtcbiAgICBjb25zdCBjYWxsYmFjayA9IChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xuICAgICAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RWxBbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRhcmdldEVsQ2xhc3MpO1xuICAgICAgICAgICAgICAgIHRhcmdldEVsQWxsLmZvckVhY2goKHRhcmdldEVsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEVsLmNsYXNzTGlzdC5yZXBsYWNlKGN1cnJBdHQsIG5ld0F0dClcbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGNhbGxiYWNrLCB7IHRocmVzaG9sZDogdGhvbGQgfSk7XG4gICAgY29uc3QgdGFyZ2V0R3JvdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGdyb3VwQ2xhc3MpO1xuICAgIHRhcmdldEdyb3VwLmZvckVhY2godGFyZ2V0ID0+IG9ic2VydmVyLm9ic2VydmUodGFyZ2V0KSlcbn1cblxuLyogY29uc3Qgc3BlY2lmaWNPYnNlcnZlciA9IChncm91cENsYXNzLCB0aG9sZCwgdGFyZ2V0RWwsIGN1cnJBdHQsIG5ld0F0dCkgPT4ge1xuICAgIGNvbnN0IGNhbGxiYWNrID0gKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0YXJnZXRFbClcbiAgICAgICAgICAgICAgICB0YXJnZXRFbC5zZXRQcm9wZXJ0eSgnb3BhY2l0eScsIDEpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGNhbGxiYWNrLCB7IHRocmVzaG9sZDogdGhvbGQgfSk7XG4gICAgY29uc3QgdGFyZ2V0R3JvdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGdyb3VwQ2xhc3MpO1xuICAgIHRhcmdldEdyb3VwLmZvckVhY2godGFyZ2V0ID0+IG9ic2VydmVyLm9ic2VydmUodGFyZ2V0KSlcbn0gKi9cblxuLyogR2FsbGVyeSBpbnRlcnZhbCAqL1xuXG5jb25zdCBpbnRlcnZhbCA9IHtcbiAgICBpbnRlcnZhbHM6IG5ldyBTZXQoKSxcblxuICAgIG1ha2VJbnRlcnZhbCguLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IG5ld0ludGVydmFsID0gc2V0SW50ZXJ2YWwoLi4uYXJncyk7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWxzLmFkZChuZXdJbnRlcnZhbCk7XG4gICAgICAgIHJldHVybiBuZXdJbnRlcnZhbDtcbiAgICB9LFxuXG4gICAgbWFrZVRpbWVvdXQoLi4uYXJncykge1xuICAgICAgICBjb25zdCBuZXdUaW1lb3V0ID0gc2V0VGltZW91dCguLi5hcmdzKTtcbiAgICAgICAgdGhpcy5pbnRlcnZhbHMuYWRkKG5ld1RpbWVvdXQpO1xuICAgICAgICByZXR1cm4gbmV3VGltZW91dDtcbiAgICB9LFxuXG4gICAgY2xlYXIoaWQpIHtcbiAgICAgICAgdGhpcy5pbnRlcnZhbHMuZGVsZXRlKGlkKTtcbiAgICAgICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwoaWQpO1xuICAgIH0sXG5cbiAgICBjbGVhckFsbCgpIHtcbiAgICAgICAgdGhpcy5pbnRlcnZhbHMuY2xlYXIoKTtcbiAgICB9XG59XG5cbmNvbnN0IHNodWZmbGVJbWFnZSA9IChpbWFnZUNsYXNzKSA9PiB7XG4gICAgY29uc3QgaW1hZ2VzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGltYWdlQ2xhc3MpKTtcbiAgICBjb25zdCBpbWdBcnJheSA9IFtdO1xuXG4gICAgaW50ZXJ2YWwuaW50ZXJ2YWxzLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmIChbLi4uaW50ZXJ2YWwuaW50ZXJ2YWxzXS5pbmRleE9mKHZhbHVlKSA+PSAyKSB7XG4gICAgICAgICAgICBpbnRlcnZhbC5pbnRlcnZhbHMuZGVsZXRlKHZhbHVlKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIGltYWdlcy5mb3JFYWNoKChpbWFnZSkgPT4ge1xuICAgICAgICBpZiAoaW1hZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZS1hY3RpdmUnKSkge1xuICAgICAgICAgICAgaW1nQXJyYXkuc3BsaWNlKDAsIGltZ0FycmF5Lmxlbmd0aCk7XG4gICAgICAgICAgICBpbWdBcnJheS5wdXNoKGltYWdlKTtcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBwcmV2U2xpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbWdBcnJheVswXS5pZCk7XG4gICAgbGV0IGN1clNsaWRlO1xuICAgIGxldCBuZXh0U2xpZGU7XG5cbiAgICBjb25zdCBzZXRTbGlkZVN0eWxlcyA9ICgpID0+IHtcbiAgICAgICAgY3VyU2xpZGUuc3R5bGUuekluZGV4ID0gJzEwJztcbiAgICAgICAgY3VyU2xpZGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIG5leHRTbGlkZS5zdHlsZS56SW5kZXggPSAnOSc7XG4gICAgICAgIG5leHRTbGlkZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG4gICAgY29uc3Qgc2V0UHJldlNsaWRlID0gKCkgPT4ge1xuICAgICAgICBwcmV2U2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgaWYgKChOdW1iZXIoaW1nQXJyYXlbMF0uaWQpIDwgaW1hZ2VzLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgIGN1clNsaWRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoKE51bWJlcihpbWdBcnJheVswXS5pZCkgKyAxKS50b1N0cmluZygpKTtcblxuICAgICAgICBpZiAoTnVtYmVyKGN1clNsaWRlLmlkKSA8IGltYWdlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBuZXh0U2xpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChOdW1iZXIoY3VyU2xpZGUuaWQpICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoTnVtYmVyKGN1clNsaWRlLmlkKSA+PSBpbWFnZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgbmV4dFNsaWRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJzAnKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJTbGlkZS5jbGFzc0xpc3QuYWRkKCdzbGlkZS1hY3RpdmUnKTtcblxuICAgICAgICBpbnRlcnZhbC5tYWtlVGltZW91dChzZXRTbGlkZVN0eWxlcywgNTAwMCk7XG5cblxuICAgIH0gZWxzZSBpZiAoKE51bWJlcihpbWdBcnJheVswXS5pZCkgPj0gaW1hZ2VzLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgIGN1clNsaWRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJzAnKTtcblxuXG4gICAgICAgIGlmIChOdW1iZXIoY3VyU2xpZGUuaWQpIDwgaW1hZ2VzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIG5leHRTbGlkZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKE51bWJlcihjdXJTbGlkZS5pZCkgKyAxKTtcbiAgICAgICAgICAgIG5leHRTbGlkZS5zdHlsZS56SW5kZXggPSAnOSc7XG4gICAgICAgIH0gZWxzZSBpZiAoTnVtYmVyKGN1clNsaWRlLmlkKSA+PSBpbWFnZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgbmV4dFNsaWRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJzAnKTtcbiAgICAgICAgICAgIG5leHRTbGlkZS5zdHlsZS56SW5kZXggPSAnOSc7XG4gICAgICAgIH1cbiAgICAgICAgY3VyU2xpZGUuY2xhc3NMaXN0LmFkZCgnc2xpZGUtYWN0aXZlJyk7XG5cbiAgICAgICAgaW50ZXJ2YWwubWFrZVRpbWVvdXQoc2V0U2xpZGVTdHlsZXMsIDUwMDApO1xuICAgIH1cblxuICAgIGludGVydmFsLm1ha2VUaW1lb3V0KHNldFByZXZTbGlkZSwgNTAwMCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoaW1hZ2VzW2ldICE9PSBjdXJTbGlkZSAmJiBpbWFnZXNbaV0gIT09IG5leHRTbGlkZSkge1xuICAgICAgICAgICAgY29uc3Qgc2V0SW1hZ2VzU3R5bGVzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGltYWdlc1tpXS5zdHlsZS56SW5kZXggPSAnOCc7XG4gICAgICAgICAgICAgICAgaW1hZ2VzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnRlcnZhbC5tYWtlVGltZW91dChzZXRJbWFnZXNTdHlsZXMsIDUwMDApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cblxuLyogTmF2IHN0eWxlcyAqL1xuXG5jb25zdCBjbGlja09wZW4gPSAodGFyZ2V0KSA9PiB7XG4gICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoMCwgMCwgMClcIjtcbn1cbmNvbnN0IGNsaWNrQ2xvc2UgPSAodGFyZ2V0KSA9PiB7XG4gICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoLTQ1MHB4LCAwLCAwKVwiO1xufVxuXG5jb25zdCBuYXZTY3JvbGwgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3RpY2t5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0aWNreS1uYXZiYXInKVxuICAgIGlmIChkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA+IDI1IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPiAyNSkge1xuICAgICAgICAvKiBzY3JvbGwgMjBweCBmcm9tIHRvcCBvZiB0aGUgZWxlbWVudCAoYm9keSBvciBST09UKSAtIGNoYW5nZSB0aGlzIGludG8gb3JpZ2luYWwgbmF2IGJhciBoZWlnaHQgKi9cbiAgICAgICAgc3RpY2t5LnN0eWxlLnRvcCA9ICcwJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdGlja3kuc3R5bGUudG9wID0gJy0xODBweCc7XG4gICAgfVxufVxuXG5jb25zdCB0YWJOYXZTdHlsZSA9ICgpID0+IHtcbiAgICBjb25zdCBjdXJyZW50TmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxlZnQtY29udGVudCBhJyk7XG4gICAgY29uc3QgY3VycmVudENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudE5hdi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoY3VycmVudE5hdltpXS5pZCA9PT0gY3VycmVudENvbnRlbnQuY2xhc3NMaXN0WzFdKSB7XG4gICAgICAgICAgICBjdXJyZW50TmF2W2ldLmNsYXNzTGlzdC5yZXBsYWNlKCduYXYtaW5hY3RpdmUnLCAnbmF2LWFjdGl2ZScpXG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuXG4vLyEgVW51c2VkXG5cbi8qIGNvbnN0IHNwbGljZU9iamVjdCA9IChvYmosIG51bTEsIG51bTIpID0+IHtcbiAgICBjb25zdCBuZXdPYmogPSB7fTtcbiAgICBpZiAoIW51bTIpIHtcbiAgICAgICAgbnVtMiA9IDE7XG4gICAgfVxuICAgIG9iai5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCBpbmRleCA9IFsuLi5vYmpdLmluZGV4T2YodmFsdWUpXG4gICAgICAgIGNvbnNvbGUubG9nKGluZGV4KVxuICAgICAgICBpZiAoaW5kZXggPCBudW0xIHx8IGluZGV4ID49IG51bTEgKyBudW0yKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG5ld09iaiwgdmFsdWUpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSlcbiAgICBjb25zb2xlLmxvZyhuZXdPYmopXG4gICAgcmV0dXJuIG5ld09iajtcbn1cblxuXG5jb25zdCBzd2l0Y2hUYWIgPSAodGFyZ2V0LCBuZXdDb250ZW50KSA9PiB7XG4gICAgY29uc3QgY3VyQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XG4gICAgY29uc3QgaHRtbE5ld0NvbnRlbnQgPSBuZXdDb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICBpZiAoIWN1ckNvbnRlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGAke3RhcmdldC5pZH1gKSkge1xuICAgICAgICBjdXJDb250ZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGh0bWxOZXdDb250ZW50LCBjdXJDb250ZW50KTtcbiAgICB9XG59ICovXG5cbmV4cG9ydCB7IGNyZWF0ZVBhZ2UsIGNsaWNrT3BlbiwgY2xpY2tDbG9zZSwgY2Fyb3VzZWxTdGFydCwgY2Fyb3VzZWxBdXRvUnVuLCBtb3ZlU2xpZGUsIGRvdE1vdmUsIGludGVyc2VjdGlvbk9ic2VydmUsIG5hdlNjcm9sbCwgc2h1ZmZsZUltYWdlLCBpbnRlcnZhbCwgYmFja2dyb3VuZENoYW5nZXIsIHVuaXZlcnNhbE9ic2VydmVyLCB0YWJOYXZTdHlsZSB9OyIsImltcG9ydCB7IGNsaWNrT3BlbiwgY2xpY2tDbG9zZSwgbmF2U2Nyb2xsLCBzaHVmZmxlSW1hZ2UsIGludGVydmFsLCBiYWNrZ3JvdW5kQ2hhbmdlciwgdW5pdmVyc2FsT2JzZXJ2ZXIsIHRhYk5hdlN0eWxlIH0gZnJvbSBcIi4uL3NjcmlwdHMvdGVtcGxhdGVcIjtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgdGFiTmF2U3R5bGUoKTtcbiAgICBcbiAgICAvKiBOYXYgR2FsbGVyeSAqL1xuICAgIGNvbnN0IG1lbnVJbnRlcnZhbCA9ICgpID0+IHNodWZmbGVJbWFnZSgnLm1lbnVQaWNzJyk7XG4gICAgY29uc3QgaW1hZ2VzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudVBpY3MnKSk7XG4gICAgY29uc3QgZmlyc3RJbWFnZUludGVydmFsID0gKCkgPT4ge1xuICAgICAgICBpbWFnZXNbMV0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfVxuICAgIGludGVydmFsLm1ha2VUaW1lb3V0KGZpcnN0SW1hZ2VJbnRlcnZhbCwgMTAwMDApO1xuICAgIGludGVydmFsLm1ha2VJbnRlcnZhbChtZW51SW50ZXJ2YWwsIDEwMDAwKTtcbiAgICBcbiAgICAvKiBCYWNrZ3JvdW5kIGNoYW5naW5nICovXG4gICAgYmFja2dyb3VuZENoYW5nZXIoJy5icmVha2Zhc3QnLCAwLjAxLCBbJy5iZy1iZicsICcuYmctbGNoJywgJy5iZy1kbnInXSk7XG4gICAgYmFja2dyb3VuZENoYW5nZXIoJy5icmVha2Zhc3QtbWVudScsIDAuMDEsIFsnLmJnLWJmJywgJy5iZy1sY2gnLCAnLmJnLWRuciddKTtcbiAgICBiYWNrZ3JvdW5kQ2hhbmdlcignLmx1bmNoJywgMC41LCBbJy5iZy1sY2gnLCAnLmJnLWJmJywgJy5iZy1kbnInXSk7XG4gICAgYmFja2dyb3VuZENoYW5nZXIoJy5sdW5jaC1tZW51JywgMC41LCBbJy5iZy1sY2gnLCAnLmJnLWJmJywgJy5iZy1kbnInXSk7XG4gICAgYmFja2dyb3VuZENoYW5nZXIoJy5kaW5uZXInLCAwLjUsIFsnLmJnLWRucicsICcuYmctYmYnLCAnLmJnLWxjaCddKTtcbiAgICBiYWNrZ3JvdW5kQ2hhbmdlcignLmRuci1jb250YWluZXInLCAwLjMsIFsnLmJnLWRucicsICcuYmctYmYnLCAnLmJnLWxjaCddKTtcblxuICAgIC8qIFNlY3Rpb24gb2JzZXJ2ZSAqL1xuICAgIFsnI2hlYWRlci1icmVha2Zhc3QnLCAnLnNwZWNpYWwtZGlzaCddLmZvckVhY2goKHBhcmVudENsYXNzKSA9PiB7XG4gICAgICAgIHVuaXZlcnNhbE9ic2VydmVyKHBhcmVudENsYXNzLCAwLjMsIHBhcmVudENsYXNzLCAnaGlkZGVuJywgJ3Nob3cnKVxuICAgIH0pO1xuXG4gICAgWycucXVvdGUtdGV4dCcsICcuYnJlYWtmYXN0LW1lbnUubm9ybWFsIC5mb29kLWNvbnRhaW5lci5maXJzdCcsICcuYnJlYWtmYXN0LW1lbnUubm9ybWFsIC5mb29kLWNvbnRhaW5lci5zZWNvbmQnLCAnLmJyZWFrZmFzdC1tZW51Lm9mZnNldCAuZm9vZC1pbWcuZmlyc3QnLCAnLmJyZWFrZmFzdC1tZW51Lm9mZnNldCAuZm9vZC1pbWcuc2Vjb25kJywgJy5kbnItZGVzYy1sZWZ0J10uZm9yRWFjaCgocGFyZW50Q2xhc3MpID0+IHtcbiAgICAgICAgdW5pdmVyc2FsT2JzZXJ2ZXIocGFyZW50Q2xhc3MsIDAuMywgcGFyZW50Q2xhc3MsICdmYWRlRnJvbUxlZnQnLCAnZmFkZVRvUmlnaHQnKVxuICAgIH0pO1xuICAgIFsnLnF1b3RlIHA6bnRoLW9mLXR5cGUoMSknLCAnLmJyZWFrZmFzdC1tZW51Lm5vcm1hbCAuZm9vZC1pbWcuZmlyc3QnLCAnLmJyZWFrZmFzdC1tZW51Lm5vcm1hbCAuZm9vZC1pbWcuc2Vjb25kJywgJy5icmVha2Zhc3QtbWVudS5vZmZzZXQgLmZvb2QtY29udGFpbmVyLmZpcnN0JywgJy5icmVha2Zhc3QtbWVudS5vZmZzZXQgLmZvb2QtY29udGFpbmVyLnNlY29uZCcsICcuZG5yLWRlc2MtcmlnaHQgLmRuci1kZXNjJywgJy5yZ3QtZG5yLTInXS5mb3JFYWNoKChwYXJlbnRDbGFzcykgPT4ge1xuICAgICAgICB1bml2ZXJzYWxPYnNlcnZlcihwYXJlbnRDbGFzcywgMC4zLCBwYXJlbnRDbGFzcywgJ2ZhZGVGcm9tUmlnaHQnLCAnZmFkZVRvTGVmdCcpXG4gICAgfSk7XG4gICAgWycubGNoLWZvb2QtaW1nJywgJy5sZnQtZG5yJywgJy5yZ3QtZG5yLTEnXS5mb3JFYWNoKChwYXJlbnRDbGFzcykgPT4ge1xuICAgICAgICB1bml2ZXJzYWxPYnNlcnZlcihwYXJlbnRDbGFzcywgMC4zLCBwYXJlbnRDbGFzcywgJ3VwJywgJ2Rvd24nKVxuICAgIH0pO1xuICAgIFsnLmx1bmNoIC5mb29kLWNvbnRhaW5lcicsICcuZG5yLWRlc2MtYnRtIC5kbnItZGVzYycsICcuYnRtLWRuciddLmZvckVhY2goKHBhcmVudENsYXNzKSA9PiB7XG4gICAgICAgIHVuaXZlcnNhbE9ic2VydmVyKHBhcmVudENsYXNzLCAwLjEsIHBhcmVudENsYXNzLCAnZmFkZU91dCcsICdmYWRlSW4nKVxuICAgIH0pO1xuXG59KTtcblxud2luZG93Lm9uc2Nyb2xsID0gbmF2U2Nyb2xsO1xuXG5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsvKiBVc2UgZXZlbnQgZGVsZWdhdGlvbiAqL1xuICAgIGNvbnN0IHNpZGVOYXZDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXIubWVudScpO1xuXG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoJy5zaWRlYmFyLnN5bWJvbCcpIHx8IGUudGFyZ2V0Lm1hdGNoZXMoJy5tZW51LWljb24nKSB8fCBlLnRhcmdldC5tYXRjaGVzKCcubWVudS10ZXh0JykpIHtcbiAgICAgICAgY2xpY2tPcGVuKHNpZGVOYXZDb250ZW50KTtcbiAgICB9XG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoJy5jbG9zZUJ0bicpKSB7XG4gICAgICAgIGNsaWNrQ2xvc2Uoc2lkZU5hdkNvbnRlbnQpO1xuICAgIH1cbn0pO1xuXG5jb25zdCBwcmVMb2FkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByZS1sb2FkZXInKVxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgICBwcmVMb2FkLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG59Il0sIm5hbWVzIjpbImJhY2tncm91bmRDaGFuZ2VyIiwiZ3JvdXBDbGFzcyIsInRob2xkIiwidGFyZ2V0RWwiLCJvYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cmllcyIsImZvckVhY2giLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwiaSIsImxlbmd0aCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwib3BhY2l0eSIsInRocmVzaG9sZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0YXJnZXQiLCJvYnNlcnZlIiwidW5pdmVyc2FsT2JzZXJ2ZXIiLCJ0YXJnZXRFbENsYXNzIiwiY3VyckF0dCIsIm5ld0F0dCIsImNsYXNzTGlzdCIsInJlcGxhY2UiLCJpbnRlcnZhbCIsImludGVydmFscyIsIlNldCIsIm1ha2VJbnRlcnZhbCIsImFyZ3MiLCJuZXdJbnRlcnZhbCIsInNldEludGVydmFsIiwidGhpcyIsImFkZCIsIm1ha2VUaW1lb3V0IiwibmV3VGltZW91dCIsInNldFRpbWVvdXQiLCJjbGVhciIsImlkIiwiZGVsZXRlIiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyQWxsIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImN1cnJlbnROYXYiLCJjdXJyZW50Q29udGVudCIsInRhYk5hdlN0eWxlIiwiaW1hZ2VzIiwiQXJyYXkiLCJmcm9tIiwiZGlzcGxheSIsImltYWdlQ2xhc3MiLCJpbWdBcnJheSIsInZhbHVlIiwiaW5kZXhPZiIsImltYWdlIiwiY29udGFpbnMiLCJzcGxpY2UiLCJwdXNoIiwicHJldlNsaWRlIiwiZ2V0RWxlbWVudEJ5SWQiLCJjdXJTbGlkZSIsIm5leHRTbGlkZSIsInNldFNsaWRlU3R5bGVzIiwiekluZGV4IiwiTnVtYmVyIiwidG9TdHJpbmciLCJyZW1vdmUiLCJzZXRJbWFnZXNTdHlsZXMiLCJzaHVmZmxlSW1hZ2UiLCJwYXJlbnRDbGFzcyIsIm9uc2Nyb2xsIiwic3RpY2t5IiwiYm9keSIsInNjcm9sbFRvcCIsImRvY3VtZW50RWxlbWVudCIsInRvcCIsImUiLCJzaWRlTmF2Q29udGVudCIsIm1hdGNoZXMiLCJ0cmFuc2Zvcm0iLCJwcmVMb2FkIiwib25sb2FkIl0sInNvdXJjZVJvb3QiOiIifQ==